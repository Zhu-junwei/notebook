### `top` 命令使用详解

`top` 是 Linux 系统中一个强大的工具，用于实时查看系统的进程和资源使用情况。它提供了 CPU 使用率、内存使用情况、进程的详细信息等，是进行性能监控和诊断的常用工具。

在终端中输入以下命令启动 `top`：

启动后，top 会展示如下几个区域的信息：

1. 系统信息区域（屏幕的上半部分）：

- 当前时间、系统运行时间、用户登录数、系统负载（Load Average）。
- CPU 使用情况：
	- us：用户进程占用 CPU 的百分比。
	- sy：系统内核占用 CPU 的百分比。
	- ni：用户进程优先级（nice 值）调整后的占用 CPU 百分比。
	- id：CPU 空闲百分比。
	- wa：等待 I/O 完成的进程占用的 CPU 百分比。
	- hi：硬件中断占用的 CPU 百分比。
	- si：软件中断占用的 CPU 百分比。
	- st：虚拟机偷取的 CPU 百分比。
- 内存使用情况：
	- Mem：显示物理内存的总量、已用、空闲、缓存等信息。
	- Swap：显示交换空间（Swap）的总量、已用和空闲情况。

- 进程信息区域（屏幕下半部分）：

列出了当前系统运行的所有进程，并提供了关于每个进程的详细信息：

- PID：进程 ID。
- USER：进程所属用户。
- PR：进程的优先级。
- NI：进程的 nice 值。
- VIRT：进程使用的虚拟内存。
- RES：进程实际占用的物理内存。
- SHR：进程使用的共享内存。
- S：进程的状态（如 R 表示运行，S 表示休眠，Z 表示僵尸进程等）。
- %CPU：进程占用的 CPU 百分比。
- %MEM：进程占用的内存百分比。
- TIME+：进程消耗的 CPU 时间。
- COMMAND：进程名称。

### `top` 命令交互操作说明

以下是 `top` 命令在交互模式下的详细操作帮助，按照顺序排列：

**全局操作**

- **`Z`**: 切换颜色模式。
- **`B`**: 切换加粗模式。
- **`E`** / **`e`**: 切换摘要/任务内存比例显示。

**切换显示内容**

- **`l`**: 显示负载平均值。
- **`t`**: 显示任务/CPU 信息。
- **`m`**: 显示内存使用情况。
- **`I`**: 显示 Irix 格式的输出。
- **`0`**: 显示零值的列。

**切换视图**

- **`1, 2, 3, 4, 5`**: 切换 CPU/Numa 视图。
  - `1, 2, 3`: 显示各个 CPU 的使用情况。
  - `4`: 显示 CPU 视图（横向显示多个 CPU）。
  - `5`: 显示 P/E 核心。
- **`f`**: 打开字段选择界面，添加、删除、排序字段。
- **`X`**: 增加固定宽度的字段。

**定位和排序**

- **`L`** / **`&`**: 定位当前排序列。
- **`<`** / **`>`**: 左/右移动排序列。

**排序与格式化**

- **`R`**: 切换排序模式。
- **`H`**: 显示线程信息。
- **`J`**: 调整数字对齐方式。
- **`C`**: 显示进程的坐标（父子进程关系）。

**切换显示内容**

- **`c`**: 切换命令名显示为完整路径。
- **`i`**: 切换显示空闲进程。
- **`S`**: 显示时间戳。
- **`j`**: 调整字符串对齐。

**高亮显示**

- **`x`**: 高亮显示当前排序字段。
- **`y`**: 高亮显示正在运行的任务。
- **`z`**: 切换颜色或单色显示模式。
- **`b`**: 切换加粗/反转（仅在 `x` 或 `y` 时有效）。

**过滤与设置**

- **`u`** / **`U`**: 按有效/任意用户过滤。
- **`o`** / **`O`**: 按其他标准过滤（如进程状态）。
- **`n`** / **`#`**: 设置显示的最大任务数。
- **`^O`**: 显示/隐藏其他过滤器。

**视图操作**

- **`V`**: 切换森林视图（显示进程的树状结构）。
- **`v`**: 显示/隐藏子进程。
- **`F`**: 保持焦点在当前进程。

**进程操作**

- **`d`**: 设置刷新延迟时间。
- **`k`**: 杀死一个进程。
- **`r`**: 调整进程的 `nice` 值（即优先级）。
- **`^R`**: 自动调整进程组的 `nice` 值。

**其他视图与操作**

- **`^G`**: 查看控制组（Control Groups）。
- **`^K`**: 查看命令行。
- **`^N`**: 查看环境变量。
- **`^U`**: 查看附加用户组。

**更多操作**

- **`Y`**: 查看进程详情。
- **`!`**: 合并 CPU。
- **`^E`**: 缩放时间显示。
- **`^P`**: 查看命名空间。

**保存配置与退出**

- **`W`**: 保存当前配置。
- **`q`**: 退出 `top` 命令。



### **常用命令选项**

- 在 top 启动时，可以使用以下命令行参数进行定制：
- top -d [秒数]：设置刷新间隔，默认是 3 秒。
- top -u [用户名]：只显示指定用户的进程。
- top -p [PID]：只显示指定 PID 的进程。
- top -n [次数]：设置 top 的更新次数，更新完毕后退出。